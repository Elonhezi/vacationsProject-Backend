(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{252:function(e,t,a){},253:function(e,t,a){},288:function(e,t,a){},290:function(e,t,a){},291:function(e,t,a){},292:function(e,t,a){},294:function(e,t,a){},312:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},426:function(e,t,a){},427:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),c=a(75),r=a.n(c),i=(a(252),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,467)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))}),o=a(16),l=(a(253),a(224)),u=a.n(l),d=a(219),j=a.n(d),h=a(2);var b,p=function(){return Object(h.jsxs)("div",{className:"Footer",children:[Object(h.jsx)("div",{children:Object(h.jsx)("p",{children:"All Rights Reserved \xa9"})}),Object(h.jsx)("div",{className:"LinksIcons",children:Object(h.jsx)("a",{target:"@",href:"https://github.com/Elonhezi",children:Object(h.jsx)(j.a,{})})}),Object(h.jsx)("div",{className:"LinksIcons",children:Object(h.jsx)("a",{target:"@",href:"https://www.linkedin.com/in/elon-hezi-80b952210",children:Object(h.jsx)(u.a,{})})})]})},v=a(156),O=a(15),x=a(14),f=a(19),m=a(225),g=a(24),y=a(23),w=function e(){Object(x.a)(this,e)},k=new(function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){var e;Object(x.a)(this,a);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).vacationsUrl="https://elon-vacations.herokuapp.com/api/vacations/",e.usersUrl="https://elon-vacations.herokuapp.com/api/users/",e.followersUrl="https://elon-vacations.herokuapp.com/api/followers/",e.registerUrl="https://elon-vacations.herokuapp.com/api/auth/register/",e.loginUrl="https://elon-vacations.herokuapp.com/api/auth/login/",e.captchaUrl="https://elon-vacations.herokuapp.com/api/auth/captcha/",e.socketUrl="https://elon-vacations.herokuapp.com/",e}return a}(w)),S=function(){function e(){Object(x.a)(this,e),this.socket=void 0}return Object(f.a)(e,[{key:"connect",value:function(){void 0!==this.socket&&this.socket.connected||(this.socket=Object(m.io)(k.socketUrl))}},{key:"disconnect",value:function(){this.socket&&!this.socket.disconnect()&&this.socket.disconnect()}}]),e}(),D=function e(){Object(x.a)(this,e),this.user=null,this.vacationsSocket=new S;var t=JSON.parse(sessionStorage.getItem("user"));t&&(this.user=t)};function U(e){return{type:b.UserRegistered,payload:e}}function N(e){return{type:b.UserLoggedIn,payload:e}}function I(){return{type:b.UserLoggedOut}}!function(e){e.UsersDownloaded="UsersDownloaded",e.UserRegistered="UserRegistered",e.UserLoggedIn="UserLoggedIn",e.UserLoggedOut="UserLoggedOut"}(b||(b={}));var L,F=function e(){Object(x.a)(this,e),this.vacations=[]};!function(e){e.VacationsDownloaded="VacationsDownloaded",e.VacationAdded="VacationAdded",e.VacationUpdated="VacationUpdated",e.VacationDeleted="VacationDeleted"}(L||(L={}));var M=Object(v.a)({vacationState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new F,t=arguments.length>1?arguments[1]:void 0,a=Object(O.a)({},e);switch(t.type){case L.VacationsDownloaded:a.vacations=t.payload;break;case L.VacationAdded:a.vacations.push(t.payload);break;case L.VacationUpdated:var n=a.vacations.findIndex((function(e){return e.vacationId===t.payload.vacationId}));a.vacations[n]=t.payload;break;case L.VacationDeleted:var s=a.vacations.findIndex((function(e){return e.vacationId===t.payload}));a.vacations.splice(s,1)}return a},authState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new D,t=arguments.length>1?arguments[1]:void 0,a=Object(O.a)({},e);switch(t.type){case b.UsersDownloaded:a.user=t.payload;break;case b.UserRegistered:case b.UserLoggedIn:a.user=t.payload,a.vacationsSocket.connect(),sessionStorage.setItem("user",JSON.stringify(a.user));break;case b.UserLoggedOut:a.user=null,a.vacationsSocket.disconnect(),sessionStorage.removeItem("user")}return a}}),V=Object(v.b)(M),q=(a(288),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).unsubscribe=void 0,n.state={user:V.getState().authState.user},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=V.subscribe((function(){return e.setState({user:V.getState().authState.user})}))}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"AuthMenu",children:[this.state.user&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("span",{children:["Hello ",this.state.user.firstName+" "+this.state.user.lastName]}),Object(h.jsx)("span",{children:" | "}),Object(h.jsx)(o.b,{to:"/logout",exact:!0,children:"Log out"})]}),!this.state.user&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{children:"Hello Guest"}),Object(h.jsx)("span",{children:" | "}),Object(h.jsx)(o.b,{to:"/login",exact:!0,children:"Log in"}),Object(h.jsx)("span",{children:" | "}),Object(h.jsx)(o.b,{to:"/register",exact:!0,children:"Register"})]})]})}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}}]),a}(n.Component)),C=(a(290),a.p+"static/media/logo.23609d38.png"),A=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(f.a)(a,[{key:"render",value:function(){return Object(h.jsx)("div",{className:"Logo",children:Object(h.jsx)("img",{src:C,alt:"\u2026",className:"responsive"})})}}]),a}(n.Component);a(291);var E=function(){Object(n.useEffect)((function(){e()}));var e=function(){var e=window.performance.navigation.type,t=V.getState().authState.user;e&&t&&V.getState().authState.vacationsSocket.connect()};return Object(h.jsx)("div",{className:"Header",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{children:Object(h.jsx)(q,{})}),Object(h.jsx)("div",{children:Object(h.jsx)(A,{})}),Object(h.jsx)("div",{className:"MainHeader",children:Object(h.jsx)("h1",{children:"Dream vacations"})})]})})};a(292);var B=function(){return Object(h.jsxs)("div",{className:"Menu",children:[Object(h.jsx)(o.b,{to:"/home",children:"Home"}),Object(h.jsx)(o.b,{to:"/vacations",children:"Vacations"})]})},P=a(10),z=a(7),R=a.n(z),T=a(12),Y=(a(294),a(60)),H=a(78),J=a.n(H),W=a(30),$=a(226),G=new(function(){function e(){Object(x.a)(this,e),this.notification=new $.a({duration:3e3,ripple:!1,position:{x:"left",y:"center"}})}return Object(f.a)(e,[{key:"success",value:function(e){this.notification.success(e)}},{key:"error",value:function(e){var t=this.getErrorMessage(e);this.notification.error(t)}},{key:"getErrorMessage",value:function(e){var t,a;if("string"===typeof e)return e;if("string"===typeof(null===(t=e.response)||void 0===t?void 0:t.data))return e.response.data;if(Array.isArray(null===(a=e.response)||void 0===a?void 0:a.data)){var n,s="",c=Object(W.a)(e.response.data);try{for(c.s();!(n=c.n()).done;){s+=n.value+"\n"}}catch(e){c.e(e)}finally{c.f()}return s}return"string"===typeof e.message?e.message:"Some error occurred, please try again."}}]),e}()),Z=a(122),K=a.n(Z);var Q=function(){var e,t,a=Object(P.g)(),n=Object(Y.a)(),s=n.register,c=n.handleSubmit,r=n.formState;function i(){return(i=Object(T.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.post(k.loginUrl,t);case 3:n=e.sent,V.dispatch(N(n.data)),G.success("Logged-in successfully."),a.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),G.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"Login MainComponents",children:[Object(h.jsxs)("h2",{children:[" Log in ",Object(h.jsx)(K.a,{})]}),Object(h.jsxs)("form",{onSubmit:c((function(e){return i.apply(this,arguments)})),children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Username:"}),Object(h.jsx)("input",Object(O.a)({type:"text",autoFocus:!0,placeholder:"Min length - 4 characters"},s("userName",{required:{value:!0,message:"Missing username."},minLength:{value:4,message:"Username too short."}}))),Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:null===(e=r.errors.userName)||void 0===e?void 0:e.message})]}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"Password:"}),Object(h.jsx)("input",Object(O.a)({type:"password",placeholder:"Min length - 4 characters"},s("password",{required:{value:!0,message:"Missing password."},minLength:{value:4,message:"password too short."}}))),Object(h.jsx)("br",{}),Object(h.jsx)("span",{children:null===(t=r.errors.password)||void 0===t?void 0:t.message})]}),Object(h.jsx)("button",{children:"Log in"}),Object(h.jsx)(o.b,{to:"/register",children:"New Account "})]})]})};var X=function(){var e=Object(P.g)();return Object(n.useEffect)((function(){V.dispatch(I()),G.success("Logged-out successfully."),e.push("/home")})),null},_=a(36),ee=(a(312),a(243)),te=J.a.create();te.interceptors.request.use((function(e){return V.getState().authState.user&&(e.headers={authorization:"Bearer "+V.getState().authState.user.token}),e}));var ae=te,ne=a(227),se=a.n(ne);var ce=function(){var e,t,a,s,c=Object(n.useState)([]),r=Object(_.a)(c,2),i=r[0],l=r[1];Object(n.useEffect)((function(){ae.get(k.captchaUrl,{withCredentials:!0}).then((function(e){return l(e.data)})).catch((function(e){return G.error(e)}))}),[]);var u=Object(P.g)(),d=Object(Y.a)(),j=d.register,b=d.handleSubmit,p=d.formState;function v(){return(v=Object(T.a)(R.a.mark((function e(t){var a;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,J.a.post(k.registerUrl,t,{withCredentials:!0});case 3:a=e.sent,V.dispatch(U(a.data)),G.success("You have been successfully registered."),u.push("/home"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),G.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(h.jsxs)("div",{className:"Register MainComponents",children:[Object(h.jsxs)("h2",{children:["Register ",Object(h.jsx)(se.a,{})]}),Object(h.jsxs)("form",{onSubmit:b((function(e){return v.apply(this,arguments)})),children:[Object(h.jsx)("label",{children:"First Name:"}),Object(h.jsx)("input",Object(O.a)({type:"text",autoFocus:!0},j("firstName",{required:{value:!0,message:"Missing first name."},minLength:{value:2,message:"First name too short."}}))),Object(h.jsx)("span",{children:null===(e=p.errors.firstName)||void 0===e?void 0:e.message}),Object(h.jsx)("label",{children:"Last Name:"}),Object(h.jsx)("input",Object(O.a)({type:"text"},j("lastName",{required:{value:!0,message:"Missing last name."},minLength:{value:2,message:"Last name too short."}}))),Object(h.jsx)("span",{children:null===(t=p.errors.lastName)||void 0===t?void 0:t.message}),Object(h.jsx)("label",{children:"Username:"}),Object(h.jsx)("input",Object(O.a)({type:"text"},j("userName",{required:{value:!0,message:"Missing username."},minLength:{value:4,message:"Username too short."}}))),Object(h.jsx)("span",{children:null===(a=p.errors.userName)||void 0===a?void 0:a.message}),Object(h.jsx)("label",{children:"Password:"}),Object(h.jsx)("input",Object(O.a)({type:"password"},j("password",{required:{value:!0,message:"Missing password."},minLength:{value:4,message:"password too short."}}))),Object(h.jsx)("span",{children:null===(s=p.errors.password)||void 0===s?void 0:s.message}),Object(h.jsxs)("div",{children:[Object(h.jsx)(ee.a,{src:"'".concat(i,"'"),children:" "}),Object(h.jsx)("input",Object(O.a)({type:"text"},j("captcha")))]}),Object(h.jsx)("button",{children:"Register"}),Object(h.jsxs)(o.b,{to:"/login",children:[Object(h.jsx)(K.a,{})," Already exist account? "]})]})]})};a(313);var re=function(){return Object(h.jsxs)("div",{className:"Page404",children:[Object(h.jsx)("h2",{children:"The page you are looking for doesn't exist."}),Object(h.jsx)("iframe",{width:"560",height:"315",src:"https://www.youtube.com/embed/t3otBjVZzT0?autoplay=1",allow:"autoplay",title:"Page not Found"})]})},ie=a(450),oe=function(){function e(){Object(x.a)(this,e),this.vacationId=void 0,this.destination=void 0,this.startDate=void 0,this.endDate=void 0,this.price=void 0,this.description=void 0,this.img=void 0}return Object(f.a)(e,null,[{key:"convertToFormData",value:function(e){var t=new FormData;return t.append("destination",e.destination),t.append("startDate",e.startDate),t.append("endDate",e.endDate),t.append("price",e.price.toString()),t.append("description",e.description),t.append("img",e.img.item(0)),t}}]),e}();a(314);var le=function(){var e,t,a,s,c,r,i,l,u,d=Object(P.g)(),j=Object(Y.a)(),b=j.register,p=j.handleSubmit,v=j.formState.errors;function x(){return(x=Object(T.a)(R.a.mark((function e(t){var a,n,s;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=V.getState().authState.vacationsSocket.socket,e.next=4,ae.post(k.vacationsUrl,oe.convertToFormData(t));case 4:n=e.sent,s=n.data,a.emit("added-vacation-from-client",s),G.success("Vacation has been added."),d.push("/vacations"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),G.error(e.t0),"Your login session has expired."===e.t0.response.data&&(V.dispatch(I()),d.push("/login"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){if(!V.getState().authState.user)return d.push("/login"),void G.error("You are not logged in!")})),Object(h.jsxs)("div",{className:"AddVacation MainComponents Box",children:[Object(h.jsx)("div",{className:"BoxIcons",children:Object(h.jsx)(o.b,{to:"/vacations",children:Object(h.jsx)(ie.a,{})})}),Object(h.jsxs)("form",{onSubmit:p((function(e){return x.apply(this,arguments)})),children:[Object(h.jsx)("input",Object(O.a)(Object(O.a)({type:"text"},b("destination",{required:!0,minLength:2})),{},{placeholder:"destination"})),"required"===(null===(e=v.destination)||void 0===e?void 0:e.type)&&Object(h.jsx)("span",{children:"Missing destination."}),"minLength"===(null===(t=v.destination)||void 0===t?void 0:t.type)&&Object(h.jsx)("span",{children:"destination too short."}),Object(h.jsx)("label",{children:"Start Date:"}),Object(h.jsx)("input",Object(O.a)(Object(O.a)({type:"date"},b("startDate",{required:!0})),{},{placeholder:"StartDate"})),"required"===(null===(a=v.startDate)||void 0===a?void 0:a.type)&&Object(h.jsx)("span",{children:"Missing Start Date."}),Object(h.jsx)("label",{children:"End Date:"}),Object(h.jsx)("input",Object(O.a)(Object(O.a)({type:"date"},b("endDate",{required:!0})),{},{placeholder:"End Date"})),"required"===(null===(s=v.endDate)||void 0===s?void 0:s.type)&&Object(h.jsx)("span",{children:"Missing endDate."}),Object(h.jsx)("input",Object(O.a)(Object(O.a)({type:"number"},b("price",{required:!0,minLength:1})),{},{placeholder:"price"})),"required"===(null===(c=v.price)||void 0===c?void 0:c.type)&&Object(h.jsx)("span",{children:"Missing price."}),"minLength"===(null===(r=v.price)||void 0===r?void 0:r.type)&&Object(h.jsx)("span",{children:"Price too short."}),Object(h.jsx)("textarea",Object(O.a)(Object(O.a)({},b("description",{required:!0,minLength:2})),{},{placeholder:"description"})),"required"===(null===(i=v.description)||void 0===i?void 0:i.type)&&Object(h.jsx)("span",{children:"Missing description."}),"minLength"===(null===(l=v.description)||void 0===l?void 0:l.type)&&Object(h.jsx)("span",{children:"description too short."}),Object(h.jsx)("label",{children:"Image: "})," ",Object(h.jsx)("br",{}),Object(h.jsx)("input",Object(O.a)({type:"file",accept:"image/*"},b("img",{required:!0}))),"required"===(null===(u=v.img)||void 0===u?void 0:u.type)&&Object(h.jsx)("span",{children:"Missing image."}),Object(h.jsx)("button",{children:"Add"})]})]})};a(315);var ue=function(){var e=Object(P.h)(),t=e.pathname.substr(e.pathname.lastIndexOf("/")+1),a=Object(P.g)(),s=Object(Y.a)(),c=s.register,r=s.handleSubmit,i=s.formState.errors,l=Object(n.useState)([]),u=Object(_.a)(l,2),d=u[0],j=u[1];function b(e){return p.apply(this,arguments)}function p(){return(p=Object(T.a)(R.a.mark((function e(n){var s,c,r;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s=V.getState().authState.vacationsSocket.socket,e.next=4,ae.put(k.vacationsUrl+"".concat(t),oe.convertToFormData(n));case 4:c=e.sent,r=c.data,s.emit("updated-vacation-from-client",r),G.success("Vacation has been Edit."),a.push("/vacations"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),G.error(e.t0),"Your login session has expired."===e.t0.response.data&&(V.dispatch(I()),a.push("/login"));case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(n.useEffect)((function(){if(!V.getState().authState.user)return a.push("/login"),void G.error("You are not logged in!");ae.get(k.vacationsUrl+"".concat(t)).then((function(e){return j(e.data)})).catch((function(e){return G.error(e)}))})),Object(h.jsxs)("div",{className:"EditVacations MainComponents Box",children:[Object(h.jsx)("div",{className:"BoxIcons",children:Object(h.jsx)(o.b,{to:"/vacations",children:Object(h.jsx)(ie.a,{})})}),d.map((function(e){var t,a,n,s,o,l,u,d;return Object(h.jsxs)("form",{onSubmit:r(b),children:[Object(h.jsx)("label",{children:"Destination:"}),Object(h.jsx)("input",Object(O.a)({type:"text",defaultValue:e.destination},c("destination",{required:!0,minLength:2}))),"required"===(null===(t=i.destination)||void 0===t?void 0:t.type)&&Object(h.jsx)("span",{children:"Missing destination."}),"minLength"===(null===(a=i.destination)||void 0===a?void 0:a.type)&&Object(h.jsx)("span",{children:"destination too short."}),Object(h.jsx)("label",{children:"Start Date:"}),Object(h.jsx)("input",Object(O.a)({type:"date",defaultValue:e.startDate},c("startDate",{required:!0}))),"required"===(null===(n=i.startDate)||void 0===n?void 0:n.type)&&Object(h.jsx)("span",{children:"Missing Start Date."}),Object(h.jsx)("label",{children:"End Date:"}),Object(h.jsx)("input",Object(O.a)({type:"date",defaultValue:e.endDate},c("endDate",{required:!0}))),"required"===(null===(s=i.endDate)||void 0===s?void 0:s.type)&&Object(h.jsx)("span",{children:"Missing endDate."}),Object(h.jsx)("label",{children:"Price:"}),Object(h.jsx)("input",Object(O.a)({type:"number",defaultValue:e.price},c("price",{required:!0,minLength:1}))),"required"===(null===(o=i.price)||void 0===o?void 0:o.type)&&Object(h.jsx)("span",{children:"Missing price."}),"minLength"===(null===(l=i.price)||void 0===l?void 0:l.type)&&Object(h.jsx)("span",{children:"Price too short."}),Object(h.jsx)("label",{children:"Description:"}),Object(h.jsx)("textarea",Object(O.a)({defaultValue:e.description},c("description",{required:!0,minLength:2}))),"required"===(null===(u=i.description)||void 0===u?void 0:u.type)&&Object(h.jsx)("span",{children:"Missing description."}),"minLength"===(null===(d=i.description)||void 0===d?void 0:d.type)&&Object(h.jsx)("span",{children:"Description too short."}),Object(h.jsx)("label",{children:"Image: "}),Object(h.jsx)("input",Object(O.a)({type:"file",accept:"image/*"},c("img"))),Object(h.jsx)("button",{children:"Update"})]},e.vacationId)}))]})};a(316);var de=function(){return Object(h.jsx)("div",{className:"Home",children:Object(h.jsx)("h1",{children:"Home Page"})})},je=a(20),he=a(461),be=a(451),pe=a(452),ve=(a(317),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).deleteVacation=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,window.confirm("Are you sure?")){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,ae.delete(k.vacationsUrl+n.state.id);case 6:G.success("Vacation has beeb deleted!"),n.props.history.push("/vacations"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),G.error("Error"+e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),n.state={vacations:[],id:0,admin:0},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(R.a.mark((function e(){var t,a,n=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=+this.props.match.params.id,e.next=4,ae.get(k.vacationsUrl+t);case 4:a=e.sent,this.setState({vacations:a.data,id:t,admin:V.getState().authState.user.isAdmin}),V.getState().authState.vacationsSocket.socket.on("updated-vacation-from-server",(function(e){var t=Object(je.a)(n.state.vacations),a=t.findIndex((function(t){return t.vacationId===e.vacationId}));t[a]=e,n.setState({vacations:t})})),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),G.error(e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState=function(e,t){};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"VacationDetails MainComponents",children:this.state.vacations.map((function(t){return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"BoxIcons",children:[Object(h.jsx)(o.b,{to:"/vacations",children:Object(h.jsx)(ie.a,{})}),1===e.state.admin&&Object(h.jsxs)(o.b,{to:"/vacations/edit/".concat(t.vacationId),children:[Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"Edit",children:[Object(h.jsx)(be.a,{})," "]})," "]}),1===e.state.admin&&Object(h.jsx)("div",{children:Object(h.jsx)(he.a,{size:"small",color:"primary","aria-label":"delete",className:"deleteButton",onClick:function(){return e.deleteVacation()},children:Object(h.jsx)(pe.a,{})})})]}),Object(h.jsx)("h2",{children:t.destination}),Object(h.jsxs)("div",{children:[Object(h.jsx)("label",{children:"From: "}),Object(h.jsx)("span",{children:t.startDate}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Until: "}),Object(h.jsx)("span",{children:t.endDate}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Price: "}),Object(h.jsxs)("span",{children:[t.price," $"]}),Object(h.jsx)("p",{children:t.description}),Object(h.jsx)("img",{alt:"#",src:k.vacationsUrl+"images/"+t.img})]})]},t.vacationId)}))})}}]),a}(n.Component)),Oe=a(456),xe=a(229),fe=a.n(xe),me=(a(318),a(455)),ge=a(453),ye=a(454),we=(a(319),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).followOnVacation=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.post(k.followersUrl+n.props.uuid+"/"+n.props.vacationId);case 2:G.success("Following..");case 3:case"end":return e.stop()}}),e)}))),n.unfollowOnVacation=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae.delete(k.followersUrl+n.props.uuid+"/"+n.props.vacationId);case 2:G.success("Unfollowing..");case 3:case"end":return e.stop()}}),e)}))),n.isFollowing=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.setState({isFollow:!n.state.isFollow});case 2:n.state.isFollow?n.followOnVacation():(n.unfollowOnVacation(),localStorage.clear());case 3:case"end":return e.stop()}}),e)}))),n.state={isFollow:!1},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.handleFollow();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleFollow",value:function(){var e=Object(T.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.get(k.followersUrl+this.props.uuid+"/"+this.props.vacationId);case 3:t=e.sent,t.data&&this.setState({isFollow:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),G.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(h.jsx)("div",{className:"FollowersList",children:Object(h.jsxs)("div",{onClick:this.isFollowing,children:[!1===this.state.isFollow&&Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"followOn",children:[" ",Object(h.jsx)(ge.a,{})]}),!0===this.state.isFollow&&Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"followOff",children:[" ",Object(h.jsx)(ye.a,{})]})]})})}}]),a}(n.Component)),ke=(a(320),a(321),function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).state={numberOfFollowers:[]},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(R.a.mark((function e(){var t;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ae.get(k.followersUrl+"user-count");case 3:t=e.sent,this.setState({numberOfFollowers:t.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),G.error(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(h.jsx)("div",{className:"FollowersCounter",children:this.state.numberOfFollowers.map((function(t){return t.vacationId===e.props.vacationId&&Object(h.jsx)("div",{className:"FollowersIcon",children:t.numberOfUsers},t.vacationId)}))})}}]),a}(n.Component));var Se=function(e){var t=Object(P.g)(),a=function(){var a=Object(T.a)(R.a.mark((function a(){var n;return R.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,n=V.getState().authState.vacationsSocket.socket,window.confirm("Are you sure?")){a.next=5;break}return a.abrupt("return");case 5:return a.next=7,ae.delete(k.vacationsUrl+e.vacation.vacationId);case 7:n.emit("deleted-vacation-from-client",e.vacation.vacationId),G.success("Vacation has beeb deleted!"),t.push("/vacations"),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),G.error("Error"+a.t0);case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(){return a.apply(this,arguments)}}();return Object(h.jsx)("div",{className:"VacationCard",children:Object(h.jsxs)("div",{className:"Box",children:[Object(h.jsx)("h2",{children:e.vacation.destination}),Object(h.jsxs)("div",{children:[Object(h.jsx)(ke,{vacationId:e.vacation.vacationId}),Object(h.jsx)("label",{children:"From: "}),Object(h.jsx)("span",{children:e.vacation.startDate}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Until: "}),Object(h.jsx)("span",{children:e.vacation.endDate}),Object(h.jsx)("br",{}),Object(h.jsx)("label",{children:"Price: "}),Object(h.jsxs)("span",{children:[e.vacation.price," $"]}),Object(h.jsx)(o.b,{to:"/vacations/details/".concat(e.vacation.vacationId),children:Object(h.jsx)("img",{alt:"#",src:k.vacationsUrl+"images/"+e.vacation.img})}),Object(h.jsx)("div",{className:"AllIcons",children:Object(h.jsxs)("div",{children:[1===e.admin&&Object(h.jsxs)(o.b,{to:"/vacations/edit/".concat(e.vacation.vacationId),children:[Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"Edit",children:[" ",Object(h.jsx)(be.a,{})]})," "]}),1===e.admin&&Object(h.jsxs)("div",{children:[" ",Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"delete",className:"deleteButton",onClick:function(){return a()},children:[" ",Object(h.jsx)(pe.a,{})," "]})]}),Object(h.jsxs)(o.b,{to:"/vacations/details/".concat(e.vacation.vacationId),children:[" ",Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"info",children:[Object(h.jsx)(me.a,{})," "]})," "]}),0===e.admin&&Object(h.jsx)(we,{uuid:V.getState().authState.user.uuid,vacationId:e.vacation.vacationId})]})})]})]},e.vacation.vacationId)})},De=(a(322),a.p+"static/media/loading.1708de7d.gif");var Ue=function(){return Object(h.jsx)("div",{className:"PleaseWait",children:Object(h.jsx)("img",{alt:"#",src:De})})},Ne=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).state={vacations:[],user:V.getState().authState.user,admin:0,isFollow:!1},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(R.a.mark((function e(){var t,a=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V.getState().authState.user){e.next=5;break}return this.props.history.push("/login"),G.error("You are not logged in!"),e.abrupt("return");case 5:if(0!==this.state.vacations.length){e.next=13;break}return e.next=8,ae.get(k.vacationsUrl+"order-by/".concat(V.getState().authState.user.uuid));case 8:t=e.sent,this.setState({vacations:t.data,admin:this.state.user.isAdmin}),V.dispatch((n=t.data,{type:L.VacationsDownloaded,payload:n})),e.next=14;break;case 13:this.setState({admin:this.state.user.isAdmin});case 14:V.getState().authState.vacationsSocket.socket.on("added-vacation-from-server",(function(e){var t=Object(je.a)(a.state.vacations);t.push(e),a.setState({vacations:t})})),V.getState().authState.vacationsSocket.socket.on("updated-vacation-from-server",(function(e){var t=Object(je.a)(a.state.vacations),n=t.findIndex((function(t){return t.vacationId===e.vacationId}));t[n]=e,a.setState({vacations:t})})),V.getState().authState.vacationsSocket.socket.on("deleted-vacation-from-server",(function(e){var t=Object(je.a)(a.state.vacations),n=t.findIndex((function(t){return t.vacationId===e}));t.splice(n,1),a.setState({vacations:t})})),e.next=23;break;case 19:e.prev=19,e.t0=e.catch(0),G.error(e.t0),"Your login session has expired."===e.t0.response.data&&(V.dispatch(I()),this.props.history.push("/login"));case 23:case"end":return e.stop()}var n}),e,this,[[0,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){var e=Object(T.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.setState=function(e,t){};case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return Object(h.jsxs)("div",{className:"VacationsList MainComponents",children:[0===this.state.vacations.length&&Object(h.jsx)(Ue,{}),Object(h.jsxs)("div",{className:"VacationNumAndAdd",children:[Object(h.jsxs)("p",{children:[this.state.vacations.length," vacations are currently available"]}),1===this.state.admin&&Object(h.jsxs)(o.b,{className:"AddButton",to:"/vacations/new/",children:[Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"add",className:"addButton",children:[" ",Object(h.jsx)(Oe.a,{})]})," "]}),1===this.state.admin&&Object(h.jsxs)(o.b,{to:"/vacations-chart",children:[Object(h.jsxs)(he.a,{size:"small",color:"primary","aria-label":"add",className:"addButton",children:[" ",Object(h.jsx)(fe.a,{})]})," "]})]}),this.state.vacations.map((function(t){return Object(h.jsx)(Se,{vacation:t,admin:e.state.admin},t.vacationId)}))]})}}]),a}(n.Component),Ie=(a(323),a(458)),Le=a(465),Fe=a(459),Me=function(e){Object(g.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(x.a)(this,a),(n=t.call(this,e)).state={following:[],details:[]},n}return Object(f.a)(a,[{key:"componentDidMount",value:function(){var e=Object(T.a)(R.a.mark((function e(){var t,a=this;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,V.getState().authState.user){e.next=5;break}return this.props.history.push("/login"),G.error("You are not logged in!"),e.abrupt("return");case 5:if(0!==this.state.details.length){e.next=13;break}return e.next=8,ae.get(k.followersUrl+"user-count");case 8:return t=e.sent,e.next=11,this.setState({following:t.data});case 11:this.state.following.forEach(function(){var e=Object(T.a)(R.a.mark((function e(t){var n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n={quarter:t.destination,earnings:t.numberOfUsers},a.state.details.push(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.setState({details:this.state.details});case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),G.error(e.t0);case 18:case"end":return e.stop()}}),e,this,[[0,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"VacationsChart MainComponents ",children:[Object(h.jsxs)("div",{children:[Object(h.jsx)(o.b,{to:"/vacations",children:Object(h.jsx)(ie.a,{})}),Object(h.jsx)("h2",{children:"The top popular vacations"})]}),Object(h.jsx)("div",{className:" MainComponents Box",children:Object(h.jsxs)(Ie.a,{domainPadding:20,children:[Object(h.jsx)(Le.a,{tickValues:[1,2,3,4],tickFormat:this.state.details.quarter}),Object(h.jsx)(Le.a,{dependentAxis:!0,tickFormat:function(e){return"".concat(e)}}),Object(h.jsx)(Fe.a,{data:this.state.details,x:"quarter",y:"earnings"})]})})]})}}]),a}(n.Component);var Ve=function(){return Object(h.jsx)("div",{className:"Routing",children:Object(h.jsxs)(P.d,{children:[Object(h.jsx)(P.b,{path:"/home",component:de,exact:!0}),Object(h.jsx)(P.b,{path:"/vacations",component:Ne,exact:!0}),Object(h.jsx)(P.b,{path:"/vacations/details/:id",component:ve,exact:!0}),Object(h.jsx)(P.b,{path:"/vacations/new",component:le,exact:!0}),Object(h.jsx)(P.b,{path:"/vacations-chart",component:Me,exact:!0}),Object(h.jsx)(P.b,{path:"/vacations/edit/:id",component:ue,exact:!0}),Object(h.jsx)(P.b,{path:"/register",component:ce,exact:!0}),Object(h.jsx)(P.b,{path:"/login",component:Q,exact:!0}),Object(h.jsx)(P.b,{path:"/logout",component:X,exact:!0}),Object(h.jsx)(P.a,{from:"/",to:"/home",exact:!0}),Object(h.jsx)(P.b,{component:re})," "]})})};a(426);var qe=function(){return Object(h.jsx)(o.a,{children:Object(h.jsxs)("div",{className:"Layout",children:[Object(h.jsx)("header",{children:Object(h.jsx)(E,{})}),Object(h.jsx)("aside",{children:Object(h.jsx)(B,{})}),Object(h.jsx)("main",{children:Object(h.jsx)(Ve,{})}),Object(h.jsx)("footer",{children:Object(h.jsx)(p,{})})]})})};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(qe,{})}),document.getElementById("root")),i()}},[[427,1,2]]]);
//# sourceMappingURL=main.222eae68.chunk.js.map